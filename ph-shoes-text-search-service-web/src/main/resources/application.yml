app:
  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:5173,http://127.0.0.1:5173,https://www.phshoesproject.com,https://phshoesproject.com}
    allowed-methods: ${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
    allowed-headers: ${CORS_ALLOWED_HEADERS:*}
    exposed-headers: []
    allow-credentials: true
    max-age: ${CORS_MAX_AGE:3600}

server:
  port: ${PORT:8084}

springdoc:
  api-docs:
    enabled: ${SPRINGDOC_APIDOCS_ENABLED:false}

spring:
  application:
    name: ph-shoes-text-search-service
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:snowflake://${SNOWFLAKE_ACCOUNT}.snowflakecomputing.com?warehouse=${SNOWFLAKE_WAREHOUSE}&db=${SNOWFLAKE_DATABASE}&schema=${SNOWFLAKE_SCHEMA}&role=${SNOWFLAKE_ROLE}&JDBC_QUERY_RESULT_FORMAT=JSON}
    driver-class-name: net.snowflake.client.jdbc.SnowflakeDriver
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
  jpa:
    hibernate:
      ddl-auto: none
    database-platform: com.nimbly.phshoesbackend.catalog.core.configs.dialect.SnowflakeDialect
    properties:
      hibernate:
        dialect: com.nimbly.phshoesbackend.catalog.core.configs.dialect.SnowflakeDialect
  main:
    allow-bean-definition-overriding: false

logging:
  level:
    root: ${LOG_LEVEL_ROOT:INFO}

services:
  common:
    migrations:
      index-ops-enabled: false

schema:
  migrations:
    enabled: false

phshoes:
  status:
    enabled: true
    path: /api/v1/system/status
    service-id: text-search
    display-name: Text Search Service
    environment: ${APP_ENV:local}
    version: ${APP_VERSION:local}
    description: Handles text search queries across catalog data.
  api:
    rate-limit:
      enabled: ${PHSHOES_API_RATE_LIMIT_ENABLED:true}
      default-window: ${PHSHOES_API_RATE_LIMIT_WINDOW:24h}
      global:
        enabled: ${PHSHOES_API_RATE_LIMIT_GLOBAL_ENABLED:true}
        limit: ${PHSHOES_API_RATE_LIMIT_GLOBAL_LIMIT:5000}
      per-ip:
        enabled: ${PHSHOES_API_RATE_LIMIT_PER_IP_ENABLED:true}
        limit: ${PHSHOES_API_RATE_LIMIT_PER_IP_LIMIT:300}
  security:
    email:
      enabled: ${PHSHOES_SECURITY_EMAIL_ENABLED:false}
    jwt:
      enabled: ${PHSHOES_SECURITY_JWT_ENABLED:false}
